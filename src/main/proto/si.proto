syntax = "proto3";

package si;
option java_package = "de.fhaachen.si.web.shop.grpc";
option java_multiple_files = true;

service Stock {
  rpc GetStock (StockRequest) returns (StockResponse);
}

message StockRequest {
  string item_id = 1;
}

message StockResponse {
  int32 quantity = 1;
}

// Order service definition
service Order {
  rpc CreateOrder (OrderRequest) returns (OrderResponse);
  rpc GetOrderById (OrderIdRequest) returns (OrderResponse);
  rpc ChangeOrderStatus (OrderStatusRequest) returns (OrderResponse);
  rpc GetAllOrders (Empty) returns (OrderListResponse);
}

message OrderRequest {
  string customerId = 1;
  string orderDate = 2;
  double orderAmount = 3;
  string currency = 4;
  repeated OrderItem items = 5;
}

message OrderItem {
  int32 itemId = 1;
  string productUuid = 2;
  int32 quantity = 3;
  double itemAmount = 4;
  string currency = 5;
}

message OrderResponse {
  string order_id = 1;
  string customerId = 2;
  string orderDate = 3;
  double total_amount = 4;
  string currency = 5;
  string status = 6;
  repeated OrderItem items = 7;
  string message = 8;
}

message OrderIdRequest {
  string orderId = 1;
}

message OrderStatusRequest {
  string order_id = 1;
  string new_status = 2;
}

message OrderListResponse {
  repeated OrderResponse orders = 1;
}

service Product {
  rpc GetAllProducts (Empty) returns (ProductList);
  rpc GetProductById (ProductIdRequest) returns (ProductResponse);
  rpc CreateProduct (ProductRequest) returns (ProductResponse);
  rpc UpdateProduct (ProductRequest) returns (ProductResponse);
  rpc DeleteProduct (ProductIdRequest) returns (DeleteResponse);
}

message Empty {}

message ProductIdRequest {
  string id = 1;
}

message ProductRequest {
  string id = 1;
}

message ProductResponse {
  string id = 1;
  string productCode = 2;
  string name = 3;
  string description = 4;
  double price = 5;
  string currency = 6;
  int32 stock = 7;
}

message ProductList {
  repeated ProductResponse products = 1;
}

message DeleteResponse {
  bool success = 1;
  string message = 2;
}